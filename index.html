<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Demo</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
  <script src="lib/three.js"></script>
  <script src="src/customObj.js"></script>
  <script src="src/engine.js"></script>
</head>

<body>
  <script>

    var scene = new THREE.Scene();
    var clock = new THREE.Clock();
    var halfBandWidth = 1.4;
    var verticalwidth = 8.0;
    var flagLength = 1.4;
    var startYear = 1980;
    var currentYear = 1980;
    var frequency = 0.25; // 1/4 year per second - one vertical width
    var speed = verticalwidth * frequency;

    const colorMaterial = new THREE.LineBasicMaterial( { color: 0x808080 } );

    //Add Scene
    {
      const L3Line = new VerticalLine(halfBandWidth * 5, colorMaterial);
      const L2Line = new VerticalLine(halfBandWidth * 3, colorMaterial);
      const L1Line = new VerticalLine(halfBandWidth, colorMaterial);
      const R1Line = new VerticalLine(-halfBandWidth, colorMaterial);
      const R2Line = new VerticalLine(-halfBandWidth * 3, colorMaterial);
      const R3Line = new VerticalLine(-halfBandWidth * 5, colorMaterial);
      const H1Line = new HorizontalLine(0.0, halfBandWidth * 10, colorMaterial);
      const H2Line = new HorizontalLine(verticalwidth, halfBandWidth * 10, colorMaterial);
      const H3Line = new HorizontalLine(verticalwidth * 2, halfBandWidth * 10, colorMaterial);
      const H4Line = new HorizontalLine(verticalwidth * 3, halfBandWidth * 10, colorMaterial);
      scene.add(L3Line.getGeo());
      scene.add(L2Line.getGeo());
      scene.add(L1Line.getGeo());
      scene.add(R1Line.getGeo());
      scene.add(R2Line.getGeo());
      scene.add(R3Line.getGeo());
      scene.add(H1Line.getGeo());
      scene.add(H2Line.getGeo());
      scene.add(H3Line.getGeo());
      scene.add(H4Line.getGeo());
    }

    //Add Flags
    {
      var Japan = new CountryFlag('Japan');
      scene.add(Japan.createMesh());
      
    }

    //canvas
    var width = window.innerWidth; 
    var height = window.innerHeight;
    var k = width / height;
    var s = 36;
    //Camera
    var camera = new THREE.PerspectiveCamera(45, k, 1, 100);
    camera.position.set(0, 10, -15); //设置相机位置
    camera.lookAt(0, 2, 2); //设置相机方向(指向的场景对象)

    //Renderer
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);
    renderer.setClearColor(0x120205, 1);
    document.body.appendChild(renderer.domElement);

    var update = function(){
      camera.position.z += speed * clock.getDelta();
      camera.lookAt(0, 2, camera.position.z + 17);
    };

    var render = function(){
      renderer.render(scene, camera);
    };

    var GameLoop = function(){
      requestAnimationFrame(GameLoop);
      update();
      render();
    };
    GameLoop();

  </script>
</body>
</html>